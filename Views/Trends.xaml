<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="MAUI_Custom_Tabs.Views.Trends"
    xmlns:vm="clr-namespace:MAUI_Custom_Tabs.ViewModels"
    vm:ViewModelLocator.AutoWireViewModel="True">


    <Grid>
              <CollectionView ItemsSource="{Binding TrendList}">
                     <CollectionView.ItemsLayout>
                            <LinearItemsLayout Orientation="Vertical"
                                               ItemSpacing="1">
                            </LinearItemsLayout>
                     </CollectionView.ItemsLayout>
                     <CollectionView.ItemTemplate>
                            <DataTemplate>
                                   <Grid RowDefinitions="Auto, Auto, Auto"
                                                 Padding="15,6">
                                          <Border Grid.RowSpan="3"
                                                  Style="{StaticResource CardStyle}"/>
                                          
                                          <!-- Header Section -->
                                          <Grid Grid.Row="0"
                                                ColumnDefinitions="4*,3*,3*"
                                                Padding="15,12,15,8">
                                                 <Label Grid.Column="0"
                                                        Text="{Binding Category}"
                                                        FontSize="14"
                                                        FontFamily="poppins600"
                                                        TextColor="{AppThemeBinding Light={StaticResource DarkBlack}, Dark={StaticResource White}}"
                                                        HorizontalOptions="Start"/>
                                                 <Label Grid.Column="1"
                                                        Text="{Binding Period}"
                                                        FontSize="11"
                                                        Style="{StaticResource BlackTextStyle400}"
                                                        Opacity=".6"
                                                        HorizontalOptions="Center"/>
                                                 <Grid Grid.Column="2"
                                                       ColumnDefinitions="Auto,*"
                                                       HorizontalOptions="End">
                                                        <Label Grid.Column="0"
                                                               FontSize="11"
                                                               FontFamily="poppins400"
                                                               HorizontalOptions="End">
                                                               <Label.Style>
                                                                      <Style TargetType="Label">
                                                                             <Setter Property="Text"
                                                                                     Value="↗"/>
                                                                             <Setter Property="TextColor"
                                                                                     Value="#22C55E"/>
                                                                             <Style.Triggers>
                                                                                    <DataTrigger TargetType="Label"
                                                                                                 Binding="{Binding TrendDirection}"
                                                                                                 Value="Down">
                                                                                           <Setter Property="Text"
                                                                                                   Value="↘"/>
                                                                                           <Setter Property="TextColor"
                                                                                                   Value="#EF4444"/>
                                                                                    </DataTrigger>
                                                                                    <DataTrigger TargetType="Label"
                                                                                                 Binding="{Binding TrendDirection}"
                                                                                                 Value="Stable">
                                                                                           <Setter Property="Text"
                                                                                                   Value="→"/>
                                                                                           <Setter Property="TextColor"
                                                                                                   Value="#6B7280"/>
                                                                                    </DataTrigger>
                                                                             </Style.Triggers>
                                                                      </Style>
                                                               </Label.Style>
                                                        </Label>
                                                        <Label Grid.Column="1"
                                                               Text="{Binding ChangePercentage, StringFormat='{}{0}%'}"
                                                               FontSize="11"
                                                               FontFamily="poppins500"
                                                               Margin="2,0,0,0">
                                                               <Label.Style>
                                                                      <Style TargetType="Label">
                                                                             <Setter Property="TextColor"
                                                                                     Value="#22C55E"/>
                                                                             <Style.Triggers>
                                                                                    <DataTrigger TargetType="Label"
                                                                                                 Binding="{Binding TrendDirection}"
                                                                                                 Value="Down">
                                                                                           <Setter Property="TextColor"
                                                                                                   Value="#EF4444"/>
                                                                                    </DataTrigger>
                                                                                    <DataTrigger TargetType="Label"
                                                                                                 Binding="{Binding TrendDirection}"
                                                                                                 Value="Stable">
                                                                                           <Setter Property="TextColor"
                                                                                                   Value="#6B7280"/>
                                                                                    </DataTrigger>
                                                                             </Style.Triggers>
                                                                      </Style>
                                                               </Label.Style>
                                                        </Label>
                                                 </Grid>
                                          </Grid>

                                          <!-- Amount Section -->
                                          <Grid Grid.Row="1"
                                                ColumnDefinitions="*,*"
                                                Padding="15,0,15,8">
                                                 <StackLayout Grid.Column="0"
                                                              Orientation="Horizontal"
                                                              HorizontalOptions="Start">
                                                        <Label Text="Current:"
                                                               FontSize="11"
                                                               Style="{StaticResource BlackTextStyle400}"
                                                               Opacity=".5"/>
                                                        <Label Text="{Binding CurrentAmount, StringFormat='${0:N0}'}"
                                                               FontSize="11"
                                                               FontFamily="poppins600"
                                                               TextColor="{AppThemeBinding Light={StaticResource DarkBlack}, Dark={StaticResource White}}"
                                                               Margin="4,0,0,0"/>
                                                 </StackLayout>
                                                 <StackLayout Grid.Column="1"
                                                              Orientation="Horizontal"
                                                              HorizontalOptions="End">
                                                        <Label Text="Previous:"
                                                               FontSize="11"
                                                               Style="{StaticResource BlackTextStyle400}"
                                                               Opacity=".5"/>
                                                        <Label Text="{Binding PreviousAmount, StringFormat='${0:N0}'}"
                                                               FontSize="11"
                                                               FontFamily="poppins400"
                                                               Style="{StaticResource BlackTextStyle400}"
                                                               Opacity=".6"
                                                               Margin="4,0,0,0"/>
                                                 </StackLayout>
                                          </Grid>

                                          <!-- Trend Bar Visualization -->
                                          <Grid Grid.Row="2"
                                                ColumnDefinitions="*"
                                                Padding="15,0,15,12">
                                                 <Grid ColumnDefinitions="*,*,*,*,*"
                                                       ColumnSpacing="3"
                                                       HeightRequest="8">
                                                        <Border Grid.Column="0"
                                                                BackgroundColor="#E5E7EB"
                                                                HeightRequest="8">
                                                               <Border.StrokeShape>
                                                                      <RoundRectangle CornerRadius="4"/>
                                                               </Border.StrokeShape>
                                                               <Border.Style>
                                                                      <Style TargetType="Border">
                                                                             <Style.Triggers>
                                                                                    <DataTrigger TargetType="Border"
                                                                                                 Binding="{Binding TrendBar1Active}"
                                                                                                 Value="True">
                                                                                           <Setter Property="BackgroundColor"
                                                                                                   Value="#3B82F6"/>
                                                                                    </DataTrigger>
                                                                             </Style.Triggers>
                                                                      </Style>
                                                               </Border.Style>
                                                        </Border>
                                                        <Border Grid.Column="1"
                                                                BackgroundColor="#E5E7EB"
                                                                HeightRequest="8">
                                                               <Border.StrokeShape>
                                                                      <RoundRectangle CornerRadius="4"/>
                                                               </Border.StrokeShape>
                                                               <Border.Style>
                                                                      <Style TargetType="Border">
                                                                             <Style.Triggers>
                                                                                    <DataTrigger TargetType="Border"
                                                                                                 Binding="{Binding TrendBar2Active}"
                                                                                                 Value="True">
                                                                                           <Setter Property="BackgroundColor"
                                                                                                   Value="#3B82F6"/>
                                                                                    </DataTrigger>
                                                                             </Style.Triggers>
                                                                      </Style>
                                                               </Border.Style>
                                                        </Border>
                                                        <Border Grid.Column="2"
                                                                BackgroundColor="#E5E7EB"
                                                                HeightRequest="8">
                                                               <Border.StrokeShape>
                                                                      <RoundRectangle CornerRadius="4"/>
                                                               </Border.StrokeShape>
                                                               <Border.Style>
                                                                      <Style TargetType="Border">
                                                                             <Style.Triggers>
                                                                                    <DataTrigger TargetType="Border"
                                                                                                 Binding="{Binding TrendBar3Active}"
                                                                                                 Value="True">
                                                                                           <Setter Property="BackgroundColor"
                                                                                                   Value="#3B82F6"/>
                                                                                    </DataTrigger>
                                                                             </Style.Triggers>
                                                                      </Style>
                                                               </Border.Style>
                                                        </Border>
                                                        <Border Grid.Column="3"
                                                                BackgroundColor="#E5E7EB"
                                                                HeightRequest="8">
                                                               <Border.StrokeShape>
                                                                      <RoundRectangle CornerRadius="4"/>
                                                               </Border.StrokeShape>
                                                               <Border.Style>
                                                                      <Style TargetType="Border">
                                                                             <Style.Triggers>
                                                                                    <DataTrigger TargetType="Border"
                                                                                                 Binding="{Binding TrendBar4Active}"
                                                                                                 Value="True">
                                                                                           <Setter Property="BackgroundColor"
                                                                                                   Value="#3B82F6"/>
                                                                                    </DataTrigger>
                                                                             </Style.Triggers>
                                                                      </Style>
                                                               </Border.Style>
                                                        </Border>
                                                        <Border Grid.Column="4"
                                                                BackgroundColor="#E5E7EB"
                                                                HeightRequest="8">
                                                               <Border.StrokeShape>
                                                                      <RoundRectangle CornerRadius="4"/>
                                                               </Border.StrokeShape>
                                                               <Border.Style>
                                                                      <Style TargetType="Border">
                                                                             <Style.Triggers>
                                                                                    <DataTrigger TargetType="Border"
                                                                                                 Binding="{Binding TrendBar5Active}"
                                                                                                 Value="True">
                                                                                           <Setter Property="BackgroundColor"
                                                                                                   Value="#3B82F6"/>
                                                                                    </DataTrigger>
                                                                             </Style.Triggers>
                                                                      </Style>
                                                               </Border.Style>
                                                        </Border>
                                                 </Grid>
                                          </Grid>
                                   </Grid>
                            </DataTemplate>
                     </CollectionView.ItemTemplate>
              </CollectionView>
       </Grid>
</ContentView>